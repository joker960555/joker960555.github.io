{"ast":null,"code":"var _jsxFileName = \"/Users/denisskidan/Documents/work/visual_code_stuff/React-projects/marvel-app/my-app/src/components/charList/CharList.js\";\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MarvelService from '../../services/MarvelService';\nimport Spinner from '../spinner/Spinner';\nimport ErrorMessage from '../errorMessage/ErrorMessage';\nimport './charList.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CharList extends Component {\n  constructor(props) {\n    super(props);\n    this.marvelService = new MarvelService();\n\n    this.onCharListLoaded = newArray => {\n      let ended = newArray.length < 9 ? true : false;\n      this.setState(({\n        charArr\n      }) => ({\n        charArr: charArr.concat(newArray),\n        loading: false,\n        error: false,\n        charEnded: ended\n      }));\n    };\n\n    this.updateCharList = () => {\n      this.marvelService.getAllCharacters().then(charArr => this.onCharListLoaded(charArr)).catch(e => this.setState({\n        loading: false,\n        error: true\n      }));\n    };\n\n    this.onLoadingMore = () => {\n      this.setState({\n        loading: true,\n        error: false,\n        pages: this.state.pages + 1\n      });\n      this.marvelService.getMoreCharacters().then(charArr => this.onCharListLoaded(charArr)).catch(e => this.setState({\n        loading: false,\n        error: true\n      }));\n    };\n\n    this.listItemsRefs = [];\n\n    this.setItemRef = ref => {\n      this.listItemsRefs.push(ref);\n    };\n\n    this.isActiveOnClick = (e, num) => {\n      if (!e.key) {\n        console.log('no');\n      }\n\n      this.listItemsRefs.forEach((item, i) => {\n        if (num === i) {\n          item.classList.add('char__item_selected');\n        } else {\n          item.classList.remove('char__item_selected');\n        }\n      });\n    };\n\n    this.isActiveOnKeyPress = (e, num) => {\n      if (e.key === 'Enter' || e.key === ' ') {\n        // this.listItemsRefs.forEach((item, i) => {\n        //     if (num === i) {\n        //         item.classList.add('char__item_selected');\n        //     } else {\n        //         item.classList.remove('char__item_selected')\n        //     }\n        // })\n        console.log('yes');\n      }\n    };\n\n    this.renderCharListItems = charArr => {\n      const items = charArr.map((item, i) => {\n        const {\n          name,\n          thumbnail,\n          thumbnailCoverStatus,\n          id\n        } = item;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"char__item\",\n          ref: this.setItemRef,\n          onClick: () => {\n            this.props.onCharSelected(id);\n            this.isActiveOnClick(i);\n          },\n          onKeyPress: e => this.isActiveOnKeyPress(i),\n          tabIndex: 0,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: thumbnailCoverStatus,\n            src: thumbnail,\n            alt: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"char__name\",\n            children: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 21\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this);\n      });\n      return /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"char__grid\",\n        children: items\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this);\n    };\n\n    this.render = () => {\n      const {\n        charArr,\n        loading,\n        error,\n        pages,\n        charEnded\n      } = this.state;\n      let statusLoading = loading && pages === 0 ? Spinner : null;\n      let statusLoadMore = loading && pages > 0 ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 53\n      }, this) : null;\n      let statusError = error ? ErrorMessage : null;\n      let currentStatus = statusError || statusLoading || this.renderCharListItems;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"char__list\",\n        children: [currentStatus(charArr), statusLoadMore, /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button button__main button__long\",\n          disabled: loading,\n          style: {\n            'display': charEnded ? 'none' : 'block'\n          },\n          onClick: this.onLoadingMore,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inner\",\n            children: \"load more\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this);\n    };\n\n    this.state = {\n      charArr: [],\n      loading: true,\n      error: false,\n      pages: 0,\n      charEnded: false\n    };\n  }\n\n  componentDidMount() {\n    this.updateCharList();\n  }\n\n}\n\nCharList.propTypes = {\n  onCharSelected: PropTypes.func\n};\nexport default CharList;\n/* <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item char__item_selected\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li> */","map":{"version":3,"sources":["/Users/denisskidan/Documents/work/visual_code_stuff/React-projects/marvel-app/my-app/src/components/charList/CharList.js"],"names":["Component","PropTypes","MarvelService","Spinner","ErrorMessage","CharList","constructor","props","marvelService","onCharListLoaded","newArray","ended","length","setState","charArr","concat","loading","error","charEnded","updateCharList","getAllCharacters","then","catch","e","onLoadingMore","pages","state","getMoreCharacters","listItemsRefs","setItemRef","ref","push","isActiveOnClick","num","key","console","log","forEach","item","i","classList","add","remove","isActiveOnKeyPress","renderCharListItems","items","map","name","thumbnail","thumbnailCoverStatus","id","onCharSelected","render","statusLoading","statusLoadMore","statusError","currentStatus","componentDidMount","propTypes","func"],"mappings":"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","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport MarvelService from '../../services/MarvelService';\nimport Spinner from '../spinner/Spinner';\nimport ErrorMessage from '../errorMessage/ErrorMessage';\n\nimport './charList.scss';\n\nclass CharList extends Component {\n\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            charArr: [],\n            loading: true,\n            error: false,\n            pages: 0,\n            charEnded: false\n        }\n    }\n\n    marvelService = new MarvelService();\n\n    componentDidMount() {\n        this.updateCharList();\n    }\n\n    onCharListLoaded = (newArray) => {\n        let ended = newArray.length < 9 ? true : false;\n\n        this.setState(({charArr}) => ({\n            charArr: charArr.concat(newArray),\n            loading: false,\n            error: false,\n            charEnded: ended\n        }))\n    }\n    \n    updateCharList = () => {\n        this.marvelService\n            .getAllCharacters()\n            .then(charArr => this.onCharListLoaded(charArr))\n            .catch(e => this.setState({loading: false, error: true}))\n    }\n\n    onLoadingMore = () => {\n        this.setState({\n            loading: true,\n            error: false,\n            pages: this.state.pages + 1\n        })\n        this.marvelService\n            .getMoreCharacters()\n            .then(charArr => this.onCharListLoaded(charArr))\n            .catch(e => this.setState({loading: false, error: true}))\n    }\n\n    listItemsRefs = [];\n    setItemRef = (ref) => {\n        this.listItemsRefs.push(ref);\n    }\n\n    isActiveOnClick = (e, num) => {\n        if (!e.key) {console.log('no')}\n        this.listItemsRefs.forEach((item, i) => {\n            if (num === i) {\n                item.classList.add('char__item_selected');\n            } else {\n                item.classList.remove('char__item_selected')\n            }\n        })\n    }\n\n    isActiveOnKeyPress = (e, num) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n            // this.listItemsRefs.forEach((item, i) => {\n            //     if (num === i) {\n            //         item.classList.add('char__item_selected');\n            //     } else {\n            //         item.classList.remove('char__item_selected')\n            //     }\n            // })\n            console.log('yes')\n        }\n    }\n\n    renderCharListItems = (charArr) => {\n        const items = charArr.map((item, i) => {\n            const {name, thumbnail, thumbnailCoverStatus, id} = item;\n            return (\n                <li className=\"char__item\" \n                    key={id}\n                    ref={this.setItemRef}\n                    onClick={() => {\n                        this.props.onCharSelected(id);\n                        this.isActiveOnClick(i);\n                    }}\n                    onKeyPress={(e) => this.isActiveOnKeyPress(i)}\n                    tabIndex={0}\n                >\n                    <img className={thumbnailCoverStatus} src={thumbnail} alt={name}/>\n                    <div className=\"char__name\">{name}</div>\n                </li>\n            )\n        })\n\n        return (\n            <ul className=\"char__grid\">\n                {items}\n            </ul>\n        )\n    }\n    \n    render = () => {\n        const {charArr, loading, error, pages, charEnded} = this.state;\n        let statusLoading = loading && pages === 0 ? Spinner : null;\n        let statusLoadMore = loading && pages > 0 ? <Spinner/> : null;\n        let statusError = error ? ErrorMessage : null;\n        let currentStatus = statusError || statusLoading || this.renderCharListItems\n        return (\n            <div className=\"char__list\">\n                {currentStatus(charArr)}\n                {statusLoadMore}\n                <button \n                    className=\"button button__main button__long\"\n                    disabled={loading}\n                    style={{'display': charEnded ? 'none' : 'block'}}\n                    onClick={this.onLoadingMore} \n                >\n                        <div className=\"inner\">load more</div>\n                </button>\n            </div>\n        )\n    }\n}\n\nCharList.propTypes = {\n    onCharSelected: PropTypes.func\n}\n\nexport default CharList;\n\n/* <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item char__item_selected\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li> */"]},"metadata":{},"sourceType":"module"}