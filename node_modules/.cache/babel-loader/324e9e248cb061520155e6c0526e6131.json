{"ast":null,"code":"import _classCallCheck from\"/Users/denisskidan/Documents/work/visual_code_stuff/React-projects/marvel-app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denisskidan/Documents/work/visual_code_stuff/React-projects/marvel-app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/denisskidan/Documents/work/visual_code_stuff/React-projects/marvel-app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/denisskidan/Documents/work/visual_code_stuff/React-projects/marvel-app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Component}from'react';import MarvelService from'../../services/MarvelService';import Spinner from'../spinner/Spinner';import ErrorMessage from'../errorMessage/ErrorMessage';import'./charList.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CharList=/*#__PURE__*/function(_Component){_inherits(CharList,_Component);var _super=_createSuper(CharList);function CharList(props){var _this;_classCallCheck(this,CharList);_this=_super.call(this,props);_this.marvelService=new MarvelService();_this.onCharListLoaded=function(newArray){var ended=newArray.length<9?true:false;_this.setState(function(_ref){var charArr=_ref.charArr;return{charArr:charArr.concat(newArray),loading:false,error:false,charEnded:ended};});};_this.updateCharList=function(){_this.marvelService.getAllCharacters().then(function(charArr){return _this.onCharListLoaded(charArr);}).catch(function(e){return _this.setState({loading:false,error:true});});};_this.onLoadingMore=function(){_this.setState({loading:true,error:false,pages:_this.state.pages+1});_this.marvelService.getMoreCharacters().then(function(charArr){return _this.onCharListLoaded(charArr);}).catch(function(e){return _this.setState({loading:false,error:true});});};_this.listItemsRefs=[];_this.setItemRef=function(ref){_this.listItemsRefs.push(ref);};_this.isActive=function(i){_this.listItemsRefs.forEach(function(item){item.classList.remove('char__item_selected');});_this.listItemsRefs[i].classList.add('char__item_selected');_this.listItemsRefs[i].focus();};_this.renderCharListItems=function(charArr){var items=charArr.map(function(item,i){var name=item.name,thumbnail=item.thumbnail,thumbnailCoverStatus=item.thumbnailCoverStatus,id=item.id;return/*#__PURE__*/_jsxs(\"li\",{className:\"char__item\",ref:_this.setItemRef,onClick:function onClick(){_this.props.onCharSelected(id);_this.isActive(i);},onKeyPress:function onKeyPress(e){if(e.key==='Enter'||e.key===' '){_this.isActive(i);_this.props.onCharSelected(id);}},tabIndex:0,children:[/*#__PURE__*/_jsx(\"img\",{className:thumbnailCoverStatus,src:thumbnail,alt:name}),/*#__PURE__*/_jsx(\"div\",{className:\"char__name\",children:name})]},id);});return/*#__PURE__*/_jsx(\"ul\",{className:\"char__grid\",children:items});};_this.render=function(){var _this$state=_this.state,charArr=_this$state.charArr,loading=_this$state.loading,error=_this$state.error,pages=_this$state.pages,charEnded=_this$state.charEnded;var statusLoading=loading&&pages===0?Spinner:null;var statusLoadMore=loading&&pages>0?/*#__PURE__*/_jsx(Spinner,{}):null;var statusError=error?ErrorMessage:null;var currentStatus=statusError||statusLoading||_this.renderCharListItems;return/*#__PURE__*/_jsxs(\"div\",{className:\"char__list\",children:[currentStatus(charArr),statusLoadMore,/*#__PURE__*/_jsx(\"button\",{className:\"button button__main button__long\",disabled:loading,style:{'display':charEnded?'none':'block'},onClick:_this.onLoadingMore,children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"load more\"})})]});};_this.state={charArr:[],loading:true,error:false,pages:0,charEnded:false};return _this;}_createClass(CharList,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateCharList();}}]);return CharList;}(Component);export default CharList;/* <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item char__item_selected\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li> */","map":{"version":3,"sources":["/Users/denisskidan/Documents/work/visual_code_stuff/React-projects/marvel-app/my-app/src/components/charList/CharList.js"],"names":["Component","MarvelService","Spinner","ErrorMessage","CharList","props","marvelService","onCharListLoaded","newArray","ended","length","setState","charArr","concat","loading","error","charEnded","updateCharList","getAllCharacters","then","catch","e","onLoadingMore","pages","state","getMoreCharacters","listItemsRefs","setItemRef","ref","push","isActive","i","forEach","item","classList","remove","add","focus","renderCharListItems","items","map","name","thumbnail","thumbnailCoverStatus","id","onCharSelected","key","render","statusLoading","statusLoadMore","statusError","currentStatus"],"mappings":"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","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport MarvelService from '../../services/MarvelService';\nimport Spinner from '../spinner/Spinner';\nimport ErrorMessage from '../errorMessage/ErrorMessage';\n\nimport './charList.scss';\n\nclass CharList extends Component {\n\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            charArr: [],\n            loading: true,\n            error: false,\n            pages: 0,\n            charEnded: false\n        }\n    }\n\n    marvelService = new MarvelService();\n\n    componentDidMount() {\n        this.updateCharList();\n    }\n\n    onCharListLoaded = (newArray) => {\n        let ended = newArray.length < 9 ? true : false;\n\n        this.setState(({charArr}) => ({\n            charArr: charArr.concat(newArray),\n            loading: false,\n            error: false,\n            charEnded: ended\n        }))\n    }\n    \n    updateCharList = () => {\n        this.marvelService\n            .getAllCharacters()\n            .then(charArr => this.onCharListLoaded(charArr))\n            .catch(e => this.setState({loading: false, error: true}))\n    }\n\n    onLoadingMore = () => {\n        this.setState({\n            loading: true,\n            error: false,\n            pages: this.state.pages + 1\n        })\n        this.marvelService\n            .getMoreCharacters()\n            .then(charArr => this.onCharListLoaded(charArr))\n            .catch(e => this.setState({loading: false, error: true}))\n    }\n\n    listItemsRefs = [];\n    setItemRef = (ref) => {\n        this.listItemsRefs.push(ref);\n    }\n\n    isActive = (i) => {\n        this.listItemsRefs.forEach(item => {\n            item.classList.remove('char__item_selected')\n        });\n        this.listItemsRefs[i].classList.add('char__item_selected');\n        this.listItemsRefs[i].focus();\n    }\n\n    renderCharListItems = (charArr) => {\n        const items = charArr.map((item, i) => {\n            const {name, thumbnail, thumbnailCoverStatus, id} = item;\n            return (\n                <li className=\"char__item\" \n                    key={id}\n                    ref={this.setItemRef}\n                    onClick={() => {\n                        this.props.onCharSelected(id);\n                        this.isActive(i);\n                    }}\n                    onKeyPress={(e) => {\n                        if (e.key === 'Enter' || e.key === ' ') {\n                            this.isActive(i);\n                            this.props.onCharSelected(id);\n                        }\n                    }}\n                    tabIndex={0}\n                >\n                    <img className={thumbnailCoverStatus} src={thumbnail} alt={name}/>\n                    <div className=\"char__name\">{name}</div>\n                </li>\n            )\n        })\n\n        return (\n            <ul className=\"char__grid\">\n                {items}\n            </ul>\n        )\n    }\n    \n    render = () => {\n        const {charArr, loading, error, pages, charEnded} = this.state;\n        let statusLoading = loading && pages === 0 ? Spinner : null;\n        let statusLoadMore = loading && pages > 0 ? <Spinner/> : null;\n        let statusError = error ? ErrorMessage : null;\n        let currentStatus = statusError || statusLoading || this.renderCharListItems\n        return (\n            <div className=\"char__list\">\n                {currentStatus(charArr)}\n                {statusLoadMore}\n                <button \n                    className=\"button button__main button__long\"\n                    disabled={loading}\n                    style={{'display': charEnded ? 'none' : 'block'}}\n                    onClick={this.onLoadingMore} \n                >\n                        <div className=\"inner\">load more</div>\n                </button>\n            </div>\n        )\n    }\n}\n\nCharList.propTypes = {\n    onCharSelected: PropTypes.func\n}\n\nexport default CharList;\n\n/* <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item char__item_selected\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li>\n                    <li className=\"char__item\">\n                        <img src={abyss} alt=\"abyss\"/>\n                        <div className=\"char__name\">Abyss</div>\n                    </li> */"]},"metadata":{},"sourceType":"module"}